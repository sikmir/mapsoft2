#!/bin/bash -fu

## Garmin Utils input/output

P=${1:-./mapsoft}
. ../test_lib.sh

# read and do nothing
assert "$P test_data/gu1.gu"  "" 0

assert "$P test_data/gu1.gu -o tmp.gu"  "" 0
assert_diff test_data/gu1a.gu tmp.gu

# encodings:
assert "$P test_data/gu1.gu -o tmp.gu --gu_enc Windows-1251"  "" 0
assert_diff test_data/gu1b.gu tmp.gu
assert "$P test_data/gu1b.gu --gu_enc Windows-1251 -o tmp.gu --gu_enc Windows-1251"  "" 0
assert_diff test_data/gu1b.gu tmp.gu

# specify format
assert "$P test_data/gu1.gu -o tmp --fmt gu"  "" 0
assert "$P tmp --fmt gu -o tmp --fmt gu"  "" 0
assert_diff test_data/gu1a.gu tmp
