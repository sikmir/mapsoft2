#!/bin/bash -efu

## Ozi input/output

P=${1:-./mapsoft}
. test_lib.sh

# read and do nothing
assert "$P test_data/ozi1.wpt"  "" 0
assert "$P test_data/ozi1.plt"  "" 0

assert "$P test_data/ozi1.wpt -o tmp.wpt"  "" 0
assert_diff test_data/ozi1a.wpt tmp.wpt

assert "$P test_data/ozi1a.wpt -o tmp.wpt"  "" 0
assert_diff test_data/ozi1a.wpt tmp.wpt

# extansion always wpt!
assert "$P test_data/ozi1a.wpt -o tmp.plt"  "" 0
assert_diff test_data/ozi1a.wpt tmp.wpt

assert "$P test_data/ozi1a.wpt -o tmp.map"  "" 0
assert_diff test_data/ozi1a.wpt tmp.wpt


assert "$P test_data/ozi1.plt -o tmp.plt"  "" 0
assert_diff test_data/ozi1a.plt tmp.plt

assert "$P test_data/ozi1a.plt -o tmp.plt"  "" 0
assert_diff test_data/ozi1a.plt tmp.plt

# extansion always plt!
assert "$P test_data/ozi1a.plt -o tmp.wpt"  "" 0
assert_diff test_data/ozi1a.plt tmp.plt

assert "$P test_data/ozi1a.plt -o tmp.map"  "" 0
assert_diff test_data/ozi1a.plt tmp.plt
